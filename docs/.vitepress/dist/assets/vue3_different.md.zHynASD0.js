import{_ as i,o as t,c as a,ag as e}from"./chunks/framework.CbQjVMS6.js";const r=JSON.parse('{"title":"Vue 2 与 Vue 3 的核心差异","description":"","frontmatter":{},"headers":[],"relativePath":"vue3/different.md","filePath":"vue3/different.md"}'),l={name:"vue3/different.md"};function n(h,s,p,k,d,E){return t(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="vue-2-与-vue-3-的核心差异" tabindex="-1">Vue 2 与 Vue 3 的核心差异 <a class="header-anchor" href="#vue-2-与-vue-3-的核心差异" aria-label="Permalink to &quot;Vue 2 与 Vue 3 的核心差异&quot;">​</a></h1><p>Vue 3 在 Vue 2 的基础上进行了重大的重构和改进，不仅带来了更好的性能，还引入了全新的 Composition API，极大地提升了代码的可维护性和复用性。</p><h2 id="_1-响应式系统-reactivity-system" tabindex="-1">1. 响应式系统 (Reactivity System) <a class="header-anchor" href="#_1-响应式系统-reactivity-system" aria-label="Permalink to &quot;1. 响应式系统 (Reactivity System)&quot;">​</a></h2><p>这是 Vue 3 最底层的核心变化。</p><table tabindex="0"><thead><tr><th style="text-align:left;">特性</th><th style="text-align:left;">Vue 2</th><th style="text-align:left;">Vue 3</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>实现机制</strong></td><td style="text-align:left;"><code>Object.defineProperty</code></td><td style="text-align:left;"><code>Proxy</code></td></tr><tr><td style="text-align:left;"><strong>对象监听</strong></td><td style="text-align:left;">递归遍历所有属性，性能开销大</td><td style="text-align:left;">仅在访问时代理，性能更好</td></tr><tr><td style="text-align:left;"><strong>数组监听</strong></td><td style="text-align:left;">拦截数组变更方法 (push, pop 等)，无法监听索引和长度变化</td><td style="text-align:left;">完美支持数组索引和长度变化的监听</td></tr><tr><td style="text-align:left;"><strong>动态属性</strong></td><td style="text-align:left;">无法检测对象属性的添加或删除 (<code>Vue.set</code> / <code>Vue.delete</code>)</td><td style="text-align:left;">原生支持对象属性的添加和删除</td></tr><tr><td style="text-align:left;"><strong>Map/Set</strong></td><td style="text-align:left;">不支持</td><td style="text-align:left;">支持 Map, Set, WeakMap, WeakSet</td></tr></tbody></table><h3 id="vue-2-局限性示例" tabindex="-1">Vue 2 局限性示例 <a class="header-anchor" href="#vue-2-局限性示例" aria-label="Permalink to &quot;Vue 2 局限性示例&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Vue 2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    obj: { a: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">methods</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.obj.b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 视图不会更新</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.obj, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 必须使用 $set</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="vue-3-优势示例" tabindex="-1">Vue 3 优势示例 <a class="header-anchor" href="#vue-3-优势示例" aria-label="Permalink to &quot;Vue 3 优势示例&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Vue 3</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { reactive } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> state</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> reactive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ a: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">state.b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 视图自动更新</span></span></code></pre></div><h2 id="_2-api-设计-options-api-vs-composition-api" tabindex="-1">2. API 设计 (Options API vs Composition API) <a class="header-anchor" href="#_2-api-设计-options-api-vs-composition-api" aria-label="Permalink to &quot;2. API 设计 (Options API vs Composition API)&quot;">​</a></h2><p>Vue 3 引入了组合式 API (Composition API)，这是为了解决大型组件逻辑复用和组织的问题。</p><h3 id="vue-2-options-api" tabindex="-1">Vue 2 (Options API) <a class="header-anchor" href="#vue-2-options-api" aria-label="Permalink to &quot;Vue 2 (Options API)&quot;">​</a></h3><p>代码按选项组织 (<code>data</code>, <code>methods</code>, <code>mounted</code> 等)。随着组件变大，相关逻辑被分散在不同选项中，难以维护。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { count: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  methods: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    increment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.count</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mounted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mounted&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h3 id="vue-3-composition-api" tabindex="-1">Vue 3 (Composition API) <a class="header-anchor" href="#vue-3-composition-api" aria-label="Permalink to &quot;Vue 3 (Composition API)&quot;">​</a></h3><p>代码按逻辑关注点组织。使用 <code>setup</code> 函数，配合 <code>ref</code>, <code>reactive</code> 等。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">import { ref, onMounted } from &#39;vue&#39;;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// 逻辑关注点：计数</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">const count = ref(0);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">const increment = () =&gt; count.value++;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">onMounted(() =&gt; {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mounted&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="_3-生命周期钩子-lifecycle-hooks" tabindex="-1">3. 生命周期钩子 (Lifecycle Hooks) <a class="header-anchor" href="#_3-生命周期钩子-lifecycle-hooks" aria-label="Permalink to &quot;3. 生命周期钩子 (Lifecycle Hooks)&quot;">​</a></h2><p>Vue 3 对生命周期钩子进行了重命名，使其更加语义化，并提供了对应的 Composition API 函数。</p><table tabindex="0"><thead><tr><th style="text-align:left;">Vue 2 Options API</th><th style="text-align:left;">Vue 3 Options API</th><th style="text-align:left;">Vue 3 Composition API</th></tr></thead><tbody><tr><td style="text-align:left;"><code>beforeCreate</code></td><td style="text-align:left;"><code>beforeCreate</code></td><td style="text-align:left;"><code>setup()</code></td></tr><tr><td style="text-align:left;"><code>created</code></td><td style="text-align:left;"><code>created</code></td><td style="text-align:left;"><code>setup()</code></td></tr><tr><td style="text-align:left;"><code>beforeMount</code></td><td style="text-align:left;"><code>beforeMount</code></td><td style="text-align:left;"><code>onBeforeMount</code></td></tr><tr><td style="text-align:left;"><code>mounted</code></td><td style="text-align:left;"><code>mounted</code></td><td style="text-align:left;"><code>onMounted</code></td></tr><tr><td style="text-align:left;"><code>beforeUpdate</code></td><td style="text-align:left;"><code>beforeUpdate</code></td><td style="text-align:left;"><code>onBeforeUpdate</code></td></tr><tr><td style="text-align:left;"><code>updated</code></td><td style="text-align:left;"><code>updated</code></td><td style="text-align:left;"><code>onUpdated</code></td></tr><tr><td style="text-align:left;"><code>beforeDestroy</code></td><td style="text-align:left;"><strong><code>beforeUnmount</code></strong></td><td style="text-align:left;"><code>onBeforeUnmount</code></td></tr><tr><td style="text-align:left;"><code>destroyed</code></td><td style="text-align:left;"><strong><code>unmounted</code></strong></td><td style="text-align:left;"><code>onUnmounted</code></td></tr><tr><td style="text-align:left;"><code>errorCaptured</code></td><td style="text-align:left;"><code>errorCaptured</code></td><td style="text-align:left;"><code>onErrorCaptured</code></td></tr></tbody></table><h2 id="_4-多根节点-fragments" tabindex="-1">4. 多根节点 (Fragments) <a class="header-anchor" href="#_4-多根节点-fragments" aria-label="Permalink to &quot;4. 多根节点 (Fragments)&quot;">​</a></h2><ul><li><strong>Vue 2</strong>: 组件模板必须有一个唯一的根元素。</li><li><strong>Vue 3</strong>: 支持多个根节点 (Fragments)，减少了不必要的 DOM 包装层。</li></ul><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- Vue 2: 必须包裹 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">header</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;...&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">header</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;...&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">footer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;...&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">footer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- Vue 3: 无需包裹 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">header</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;...&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">header</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;...&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">footer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;...&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">footer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="_5-teleport-传送门" tabindex="-1">5. Teleport (传送门) <a class="header-anchor" href="#_5-teleport-传送门" aria-label="Permalink to &quot;5. Teleport (传送门)&quot;">​</a></h2><p>Vue 3 原生内置了 <code>Teleport</code> 组件，允许将组件的 DOM 结构渲染到当前组件树之外的任何位置（如 <code>body</code> 下），非常适合模态框 (Modal)、通知 (Notification) 等场景。</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @click</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;open = true&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Open Modal&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">Teleport</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;body&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;open&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;modal&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Hello from the modal!&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @click</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;open = false&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Close&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">Teleport</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="_6-suspense-异步依赖处理" tabindex="-1">6. Suspense (异步依赖处理) <a class="header-anchor" href="#_6-suspense-异步依赖处理" aria-label="Permalink to &quot;6. Suspense (异步依赖处理)&quot;">​</a></h2><p>Vue 3 引入了 <code>Suspense</code> 组件，用于处理异步组件的加载状态（实验性特性）。它允许在组件树等待异步依赖（如 <code>async setup</code> 或异步组件）时渲染后备内容。</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">Suspense</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> #default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">AsyncComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> #fallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; Loading... &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">Suspense</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="_7-typescript-支持" tabindex="-1">7. TypeScript 支持 <a class="header-anchor" href="#_7-typescript-支持" aria-label="Permalink to &quot;7. TypeScript 支持&quot;">​</a></h2><ul><li><strong>Vue 2</strong>: TypeScript 支持较弱，通常需要使用 <code>vue-class-component</code> 装饰器写法，类型推断不够友好。</li><li><strong>Vue 3</strong>: 源码使用 TypeScript 重写，提供了更好的类型推断。Composition API 天然对 TypeScript 友好，无需复杂的装饰器。</li></ul><h2 id="_8-性能优化" tabindex="-1">8. 性能优化 <a class="header-anchor" href="#_8-性能优化" aria-label="Permalink to &quot;8. 性能优化&quot;">​</a></h2><ul><li><strong>打包大小</strong>: Tree-shaking 支持更彻底，按需引入 API，减少打包体积。</li><li><strong>渲染性能</strong>: <ul><li><strong>静态提升 (Static Hoisting)</strong>: 静态节点被提升到渲染函数之外，避免每次重新渲染时重复创建。</li><li><strong>Diff 算法优化</strong>: 引入 Block Tree 和 Patch Flags，只对比带有动态标记的节点，跳过静态节点。</li><li><strong>事件侦听器缓存</strong>: 缓存事件处理函数，避免不必要的组件更新。</li></ul></li></ul><h2 id="_9-全局-api-调整" tabindex="-1">9. 全局 API 调整 <a class="header-anchor" href="#_9-全局-api-调整" aria-label="Permalink to &quot;9. 全局 API 调整&quot;">​</a></h2><p>Vue 3 将全局 API 从 <code>Vue</code> 构造函数转移到了应用实例 (<code>app</code>) 上，避免了全局污染，支持同一页面运行多个 Vue 应用实例。</p><table tabindex="0"><thead><tr><th style="text-align:left;">Vue 2 全局 API</th><th style="text-align:left;">Vue 3 实例 API</th></tr></thead><tbody><tr><td style="text-align:left;"><code>Vue.use</code></td><td style="text-align:left;"><code>app.use</code></td></tr><tr><td style="text-align:left;"><code>Vue.mixin</code></td><td style="text-align:left;"><code>app.mixin</code></td></tr><tr><td style="text-align:left;"><code>Vue.component</code></td><td style="text-align:left;"><code>app.component</code></td></tr><tr><td style="text-align:left;"><code>Vue.directive</code></td><td style="text-align:left;"><code>app.directive</code></td></tr><tr><td style="text-align:left;"><code>new Vue({})</code></td><td style="text-align:left;"><code>createApp({})</code></td></tr></tbody></table><h2 id="_10-v-model-变化" tabindex="-1">10. v-model 变化 <a class="header-anchor" href="#_10-v-model-变化" aria-label="Permalink to &quot;10. v-model 变化&quot;">​</a></h2><ul><li><strong>Vue 2</strong>: 组件上默认使用 <code>value</code> prop 和 <code>input</code> event。 <ul><li><code>.sync</code> 修饰符用于双向绑定其他 prop。</li></ul></li><li><strong>Vue 3</strong>: 组件上默认使用 <code>modelValue</code> prop 和 <code>update:modelValue</code> event。 <ul><li>移除了 <code>.sync</code>，直接使用 <code>v-model:propName</code> 代替。</li><li>支持在同一个组件上使用多个 <code>v-model</code>。</li></ul></li></ul><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- Vue 3 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">ChildComponent</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-model:title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pageTitle&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-model:content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pageContent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span></code></pre></div><h2 id="_11-v-if-和-v-for-优先级" tabindex="-1">11. v-if 和 v-for 优先级 <a class="header-anchor" href="#_11-v-if-和-v-for-优先级" aria-label="Permalink to &quot;11. v-if 和 v-for 优先级&quot;">​</a></h2><ul><li><strong>Vue 2</strong>: <code>v-for</code> 优先级高于 <code>v-if</code>（不推荐同时使用）。</li><li><strong>Vue 3</strong>: <code>v-if</code> 优先级高于 <code>v-for</code>。这意味着 <code>v-if</code> 无法访问 <code>v-for</code> 作用域内的变量。</li></ul><h2 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h2><p>Vue 3 是一次全面的进化，它在保持 Vue 易用性的同时，解决了 Vue 2 在大规模应用开发中的痛点（逻辑复用、类型支持、性能瓶颈）。虽然 Options API 依然可用，但 Composition API 代表了 Vue 开发的未来方向。</p>`,43)])])}const g=i(l,[["render",n]]);export{r as __pageData,g as default};
